<h2 class="text-center mb-4">⚡ Productos en tiempo real</h2>

<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4" id="product-list">
  {{#each products}}
    <div class="col" data-id="{{this._id}}">
      <div class="product-card h-100">
        <div class="text-center mb-3">
          {{#if this.thumbnails.[0]}}
            <img src="{{this.thumbnails.[0]}}" alt="{{this.title}}" class="img-fluid rounded" style="max-height: 200px;">
          {{else}}
            <div style="height: 200px; display: flex; align-items: center; justify-content: center; background-color: #eee;">
              <small>Sin imagen</small>
            </div>
          {{/if}}
        </div>
        <h5 class="fw-bold text-center">{{this.title}}</h5>
        <p class="text-muted text-center">${{this.price}}</p>
        <ul class="list-unstyled">
          <li><strong>ID:</strong> {{this._id}}</li>
          <li><strong>Stock:</strong> {{this.stock}}</li>
          <li><strong>Categoría:</strong> {{this.category}}</li>
        </ul>
      </div>
    </div>
  {{/each}}
</div>

<hr class="my-5" />

<div class="row">
  <div class="col-md-6">
    <h4>➕ Agregar producto</h4>
    <form id="product-form" class="border p-3 rounded bg-light">
      <div class="mb-2"><input class="form-control" type="text" name="title" placeholder="Título" required /></div>
      <div class="mb-2"><input class="form-control" type="text" name="description" placeholder="Descripción" required /></div>
      <div class="mb-2"><input class="form-control" type="text" name="code" placeholder="Código" required /></div>
      <div class="mb-2"><input class="form-control" type="number" name="price" placeholder="Precio" required /></div>
      <div class="mb-2"><input class="form-control" type="text" name="status" placeholder="Estado (ej: disponible)" required /></div>
      <div class="mb-2"><input class="form-control" type="number" name="stock" placeholder="Stock" required /></div>
      <div class="mb-2"><input class="form-control" type="text" name="category" placeholder="Categoría" required /></div>
      <div class="mb-3"><input class="form-control" type="text" name="thumbnails" placeholder="URL de imagen" required /></div>
      <button type="submit" class="btn btn-success w-100">Agregar</button>
    </form>
  </div>

  <div class="col-md-6">
    <h4>❌ Eliminar producto</h4>
    <form id="delete-form" class="border p-3 rounded bg-light">
      <div class="mb-3"><input class="form-control" type="text" name="id" placeholder="ID del producto" required /></div>
      <button type="submit" class="btn btn-danger w-100">Eliminar</button>
    </form>
  </div>
</div>

<hr class="my-5" />

<div class="text-center">
  <a href="/" class="btn btn-outline-secondary">← Volver a la vista principal</a>
</div>

<script src="/socket.io/socket.io.js"></script>
<script src="/js/realtime.js"></script>
